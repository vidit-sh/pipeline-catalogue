(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{242:function(e,t,a){e.exports=a(434)},247:function(e,t,a){},434:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),c=a.n(l),i=(a(247),a(108)),s=a.n(i),o=a(164),m=a(31),u=a(32),p=a(35),d=a(33),b=a(36),g=a(15),f=a(62),v=a.n(f),h=a(64),j=a.n(h);var y=Object(g.withStyles)(function(e){return{logo:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit}}})(function(e){var t=e.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(v.a,{position:"static"},r.a.createElement(j.a,null,r.a.createElement("img",{className:t.logo,src:"./static/images/lloyds_personal_banking_logo.png",alt:"Lloyds Personal Banking"}))))}),O=a(8),E=a(16),k=a(18),I=a(17),C=a(37),S=a(34),x=a(23),D=a.n(x),N=a(5),B=a.n(N),w=a(168),A=a.n(w);var T=Object(g.withStyles)(function(e){return{listItemDragged:{backgroundColor:e.palette.primary.main},listItemTextDragged:{color:"#fff"},iconButton:{padding:"0px"}}})(function(e){var t=e.classes,a=e.index,n=e.item,l=e.type,c=e.bucketName,i=e.onDeleteClick,s=e.showDeleteButton;return r.a.createElement(S.b,{draggableId:"".concat(l,"-").concat(c,"-").concat(n.Name),index:a},function(e,a){return r.a.createElement(O.n,{rootRef:e.innerRef},r.a.createElement(O.j,Object.assign({},e.draggableProps,e.dragHandleProps,{style:e.draggableProps.style,classes:{root:a.isDragging?t.listItemDragged:void 0}}),r.a.createElement(O.k,{primary:n.Name,classes:{primary:a.isDragging?t.listItemTextDragged:void 0}}),s?r.a.createElement(O.f,{color:"primary",className:t.iconButton,onClick:i},r.a.createElement(A.a,null)):null))})});var R=Object(g.withStyles)(function(e){return{root:Object(I.a)({},e.mixins.gutters(),{marginBottom:2*e.spacing.unit,paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit}),heading:{fontSize:"24px",marginBottom:2*e.spacing.unit},list:{width:"100%",backgroundColor:e.palette.background.paper},listDragged:{backgroundColor:"lightgrey"}}})(function(e){var t=e.classes,a=e.bucketName,n=e.items,l=e.type,c=e.droppableBucket,i=e.onDeleteClick,s="Default"===a;return r.a.createElement(O.m,{className:t.root,elevation:1},s?null:r.a.createElement(O.r,{variant:"h6"},a),r.a.createElement(S.c,{droppableId:"".concat(l,"-").concat(a,"-Droppable"),isDropDisabled:!(s||a===c)},function(e,c){return r.a.createElement("div",Object.assign({className:B()(t.list,c.isDraggingOver&&t.listDragged),ref:e.innerRef},e.droppableProps),r.a.createElement(O.i,{dense:!0},n&&n.length?n.map(function(e,t){return r.a.createElement(T,{key:e.Name,index:t,item:e,type:l,bucketName:a,onDeleteClick:function(){return i&&i(a,t)},showDeleteButton:!!i})}):r.a.createElement(O.r,{align:"center"},s?"Drag few items here":""),e.placeholder))}))});var P=Object(g.withStyles)(function(e){return{heading:{fontSize:"24px",marginBottom:2*e.spacing.unit,marginTop:2*e.spacing.unit}}})(function(e){var t=e.className,a=e.classes,n=e.items,l=e.title,c=e.type,i=e.droppableBucket,s=e.stages,o=e.onDeleteClick;return r.a.createElement("div",{className:B()(t,a.root)},r.a.createElement(D.a,{variant:"h2",className:a.heading},l),s&&s.length?s.map(function(e){return n[e]?r.a.createElement(R,{key:e,bucketName:e,items:n[e],type:c,droppableBucket:i}):null}):r.a.createElement(R,{bucketName:"Default",items:n.Default,type:c,droppableBucket:i,onDeleteClick:o}))});var G=function(e){var t=e.className,a=e.availableItems,n=e.droppableBucket,l=e.stages;return r.a.createElement(P,{className:t,items:a,title:"Available Options",type:"available",droppableBucket:n,stages:l})};var z=function(e){var t=e.className,a=e.selectedItems,n=e.droppableBucket,l=(e.stages,e.onDeleteClick);return r.a.createElement(P,{className:t,items:a,title:"Selected Options",type:"selected",droppableBucket:n,onDeleteClick:l})},M=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),l=Object(C.a)(r,1)[0];return n.splice(a,0,l),n},W=function(e,t,a,n){var r=Array.from(e),l=Array.from(t||[]),c=r.splice(a,1),i=Object(C.a)(c,1)[0];return l.splice(n,0,i),{source:r,destination:l}},_=a(109),F=a.n(_),J=a(169),L=a.n(J),q=a(65),H=a.n(q),U=a(170),V=a.n(U),K=a(432),Q=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={expanded:null,selectedItems:a.props.selectedItems},a.pipelineRef=null,a.configRef=null,a.handleChange=function(e){return function(t,n){a.setState({expanded:!!n&&e})}},a.download=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file";if(e){var a=new Blob([e]);L()(a,t)}},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.selectedItems;if(e.selectedItems&&t!==e.selectedItems){var a=(e.selectedItems.Default||[]).reduce(function(e,t){return Object(I.a)({},e,Object(k.a)({},t.Stage,e[t.Stage]?Object(E.a)(e[t.Stage]).concat([t]):[t]))},{});this.setState({selectedItems:a})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.classes,l=t.usedConfigs,c=t.pipelineTemplate,i=this.state,s=i.expanded,o=i.selectedItems;return r.a.createElement("div",{className:B()(a,n.root)},r.a.createElement(D.a,{variant:"h2",className:n.heading},"Configurations"),r.a.createElement(O.a,{expanded:"pipeline"===s,onChange:this.handleChange("pipeline")},r.a.createElement(O.c,{expandIcon:r.a.createElement(F.a,null)},r.a.createElement(D.a,{className:n.heading,variant:"h3"},"Pipeline")),r.a.createElement(O.b,{className:n.details},r.a.createElement("pre",{className:n.code,ref:function(t){return e.pipelineRef=t}},c?K.render(c,{selectedItems:Object.keys(o).map(function(e){return{name:e,commands:o[e].reduce(function(e,t){return Array.isArray(t.Command)?Object(E.a)(e).concat(Object(E.a)(t.Command)):"string"===typeof t.Command?Object(E.a)(e).concat([t.Command]):Object(E.a)(e)},[]),globals:o[e].reduce(function(e,t){return Array.isArray(t.Global)?Object(E.a)(e).concat(Object(E.a)(t.Global)):"string"===typeof t.Global?Object(E.a)(e).concat([t.Global]):Object(E.a)(e)},[]),agent:o[e].find(function(e){return!!e.StageAgent})?o[e].find(function(e){return!!e.StageAgent}).StageAgent:void 0,environments:o[e].reduce(function(e,t){return Array.isArray(t.Environment)?Object(E.a)(e).concat(Object(E.a)(t.Environment)):"string"===typeof t.Environment?Object(E.a)(e).concat([t.Environment]):Object(E.a)(e)},[]),libraries:o[e].map(function(e){return{identifier:e.Library,remote:e["Github Repo"]}}),isStageVisible:!!o[e]&&o[e].length}})}):null),r.a.createElement(H.a,{variant:"contained",color:"primary",size:"small",className:n.btnSave,onClick:function(){e.download(e.pipelineRef.innerText,"pipeline")}},r.a.createElement(V.a,{className:n.btnIcon}),"Save"))),r.a.createElement(O.a,{expanded:"config"===s,onChange:this.handleChange("config")},r.a.createElement(O.c,{expandIcon:r.a.createElement(F.a,null)},r.a.createElement(D.a,{className:n.heading,variant:"h3"},"Config")),r.a.createElement(O.b,{className:n.details},Array.from(l).map(function(e){return r.a.createElement("a",{key:e,href:e,target:"_blank",rel:"noopener noreferrer"},e)}))))}}]),t}(r.a.Component),X=Object(g.withStyles)(function(e){return{heading:{fontSize:"24px",marginBottom:1*e.spacing.unit,marginTop:1*e.spacing.unit},code:{"flex-basis":"100%","overflow-x":"auto"},btnSave:{marginTop:4*e.spacing.unit,marginBottom:2*e.spacing.unit},btnIcon:{marginRight:e.spacing.unit},details:{"flex-wrap":"wrap"}}})(Q),Y=["Checkout","Unit Test","Static Assessment","Build","Functional Test","Non-Functional Test","Reporting"],Z=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={selectedArchetype:null,availableItems:null,selectedItems:{},usedConfigs:new Set,droppableBucket:null},a.handleChange=function(e){a.setState({selectedArchetype:e.target.value,availableItems:a.props.data[e.target.value],selectedItems:{},usedConfigs:new Set})},a.onDragEnd=function(e){var t=e.source,n=e.destination;if(n){var r,l,c=a.state,i=c.availableItems,s=c.selectedItems,o=t.droppableId.split("-"),m=Object(C.a)(o,2),u=m[0],p=m[1],d=n.droppableId.split("-"),b=Object(C.a)(d,2),g=b[0],f=b[1];if("available"===u?(r=i,l=s):(r=s,l=i),u===g){var v=M(r[p],t.index,n.index);a.setState(function(e){return"available"===u?{availableItems:Object(I.a)({},e.availableItems,Object(k.a)({},p,v)),droppableBucket:null}:{selectedItems:Object(I.a)({},e.selectedItems,Object(k.a)({},p,v)),droppableBucket:null}})}else{var h=W(r[p],l[f],t.index,n.index);a.setState(function(e){var a=new Set(e.usedConfigs);return"available"===u?(a.add(i[p][t.index].Config),{availableItems:Object(I.a)({},e.availableItems,Object(k.a)({},p,h.source)),selectedItems:Object(I.a)({},e.selectedItems,Object(k.a)({},f,h.destination)),droppableBucket:null,usedConfigs:a}):(a.delete(s[p][t.index].Config),{availableItems:Object(I.a)({},e.availableItems,Object(k.a)({},f,h.destination)),selectedItems:Object(I.a)({},e.selectedItems,Object(k.a)({},p,h.source)),droppableBucket:null,usedConfigs:a})})}}},a.onSelectedItemDelete=function(e,t){var n=a.state.selectedItems,r=Object(I.a)({},n[e][t]),l=Object(E.a)(n.Default);l.splice(t,1),a.setState(function(e){return{selectedItems:Object(I.a)({},e.selectedItems,{Default:l}),availableItems:Object(I.a)({},e.availableItems,Object(k.a)({},r.Stage,Object(E.a)(e.availableItems[r.Stage]).concat([r])))}})},a.onDragStart=function(e){var t=e.source.droppableId.split("-")[1];a.setState({droppableBucket:t})},a.render=function(){var e=a.props,t=e.className,n=e.classes,l=e.data,c=e.pipelineTemplate,i=a.state,s=i.selectedArchetype,o=i.availableItems,m=i.selectedItems,u=i.droppableBucket,p=i.usedConfigs;return r.a.createElement("div",null,r.a.createElement("form",{className:t,autoComplete:"off"},r.a.createElement(O.d,{className:n.formControl},r.a.createElement(O.g,{htmlFor:"arch"},"Archetype"),r.a.createElement(O.o,{value:s,onChange:a.handleChange,inputProps:{name:"archetype",id:"arch"}},Object.keys(l).map(function(e){return r.a.createElement(O.l,{key:e,value:e},e)})))),r.a.createElement(S.a,{onDragEnd:a.onDragEnd,onDragStart:a.onDragStart},r.a.createElement(O.e,{container:!0,justify:"center",spacing:32},r.a.createElement(O.e,{item:!0,xs:3},r.a.createElement(G,{availableItems:o,droppableBucket:u,stages:Y})),r.a.createElement(O.e,{item:!0,xs:3},r.a.createElement(z,{selectedItems:m,droppableBucket:u,onDeleteClick:a.onSelectedItemDelete})),r.a.createElement(O.e,{item:!0,xs:3},r.a.createElement(X,{usedConfigs:p,selectedItems:m,pipelineTemplate:c})))))},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.data,t=Object.keys(this.props.data)[0];this.setState({selectedArchetype:t,availableItems:e[t]})}}]),t}(r.a.Component),$=Object(g.withStyles)(function(e){return{formControl:{minWidth:120,marginTop:e.spacing.unit}}})(Z),ee=Object(g.createMuiTheme)({palette:{primary:{main:"#006a4d"}}}),te=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={currentSol:0,data:null},a.onTabClick=function(e,t){a.setState({currentSol:t})},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=Object(o.a)(s.a.mark(function e(){var t,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./static/data/libraries.json");case 2:return t=e.sent,e.next=5,fetch("./static/templates/pipeline.template.mst");case 5:return a=e.sent,e.next=8,a.text();case 8:return this.pipelineTemplate=e.sent,e.t0=this,e.next=12,t.json();case 12:e.t1=e.sent,e.t2={data:e.t1},e.t0.setState.call(e.t0,e.t2);case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.currentSol,l=a.data;return r.a.createElement(g.MuiThemeProvider,{theme:ee},l?r.a.createElement("div",null,r.a.createElement(y,null),r.a.createElement("div",{className:t.tabs},r.a.createElement(O.q,{value:n,onChange:this.onTabClick,indicatorColor:"primary"},Object.keys(l).map(function(e){return r.a.createElement(O.p,{key:e,label:e})})),Object.keys(l).map(function(t,a){return n===a?r.a.createElement($,{key:t,data:l[t],pipelineTemplate:e.pipelineTemplate}):null}))):r.a.createElement(O.h,{color:"primary"}))}}]),t}(n.Component),ae=Object(g.withStyles)(function(e){return{tabs:{padding:2*e.spacing.unit}}})(te);c.a.render(r.a.createElement(ae,null),document.getElementById("root"))}},[[242,2,1]]]);
//# sourceMappingURL=main.66bfe1fc.chunk.js.map